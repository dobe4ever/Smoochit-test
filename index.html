<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smoochit</title>
    <link rel="stylesheet" type="text/css" href="./static/style.css">
</head>
<body>
	<div class="container">
        <div id="messages"></div>
		<img src="./static/logo-new.png" alt="Logo" class="logo">
		<input type="text" id="input" class="input-box" placeholder="What would you like to know?">
		<button onclick="getResponse()" class="submit-button">Just Smoochit!</button>
		<a href="#" class="link">Get your own ChatGTP clone</a>
	</div>

    <script>
        function appendMessage(role, content) {
            var chatMessages = document.getElementById("messages");
            var message = document.createElement("div");
            message.className = role;
            message.textContent = content;
            chatMessages.appendChild(message);
        }

        function getResponse() {
            var query = document.getElementById("input").value;
            var messages = [
                { role: "user", content: query }
            ];

            fetch('/get-response', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ messages: messages })
            })
            .then(response => response.json())
            .then(data => {
                var responseMessages = data.messages;

                // Display the response messages
                responseMessages.forEach(message => {
                    if (message.role === "assistant") {
                        appendMessage(message.role, message.content.text); // Access the 'text' property
                    } else {
                        appendMessage(message.role, message.content);
                    }
                });
            })
            .catch(error => {
                console.error(error);
            });
        }
    </script>


</body> 
</html>